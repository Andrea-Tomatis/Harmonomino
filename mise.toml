[tools]
rust = "latest"
uv = "latest"
typst = "latest"

[tasks.experiments]
description = "Run experiments (skips if config unchanged)"
dir = "experiments"
run = "uv run python run_experiments.py"

[tasks.plots]
description = "Generate plots (skips if inputs unchanged)"
depends = ["experiments"]
dir = "experiments"
run = "uv run python plot_results.py"

[tasks.report]
description = "Compile report (always runs — fast)"
depends = ["plots"]
run = "typst compile report/main.typ"

[tasks.pipeline]
description = "Run full pipeline: experiments → plots → report"
depends = ["report"]

[tasks.check]
description = "Run cargo check + clippy + tests"
run = [
  "cargo check",
  "cargo clippy --all-targets",
  "cargo test",
]
